#!/bin/sh
clear

#CHECK IF ROOT
ROOTUID="0"

if [ "$(id -u)" -ne "$ROOTUID" ] ; then
    echo "You need to be root to run the script"
    sudo su
fi

#PARTE GRAFICA E PERSONALIZZATA INIZIALE
title="Easytech Website Assestement"
echo "\033]0;$title\a"
echo '\e[38;5;82m'"-------------------------------------------------------------------

▒█░░▒█ █▀▀ █░░ █▀▀ █▀▀█ █▀▄▀█ █▀▀ 　 ▀▀█▀▀ █▀▀█ 　 █▀▀ █▀▀█ █▀▀ █░░█ ▀▀█▀▀ █▀▀ █▀▀ █░░█ 　 
▒█▒█▒█ █▀▀ █░░ █░░ █░░█ █░▀░█ █▀▀ 　 ░░█░░ █░░█ 　 █▀▀ █▄▄█ ▀▀█ █▄▄█ ░░█░░ █▀▀ █░░ █▀▀█ 　 
▒█▄▀▄█ ▀▀▀ ▀▀▀ ▀▀▀ ▀▀▀▀ ▀░░░▀ ▀▀▀ 　 ░░▀░░ ▀▀▀▀ 　 ▀▀▀ ▀░░▀ ▀▀▀ ▄▄▄█ ░░▀░░ ▀▀▀ ▀▀▀ ▀░░▀ 　 

█░░░█ █▀▀ █▀▀▄ 　 ▀█░█▀ █░░█ █░░ █▀▀▄ █▀▀ █▀▀█ █▀▀█ █▀▀▄ ░▀░ █░░ ░▀░ ▀▀█▀▀ █░░█ 
█▄█▄█ █▀▀ █▀▀▄ 　 ░█▄█░ █░░█ █░░ █░░█ █▀▀ █▄▄▀ █▄▄█ █▀▀▄ ▀█▀ █░░ ▀█▀ ░░█░░ █▄▄█ 
░▀░▀░ ▀▀▀ ▀▀▀░ 　 ░░▀░░ ░▀▀▀ ▀▀▀ ▀░░▀ ▀▀▀ ▀░▀▀ ▀░░▀ ▀▀▀░ ▀▀▀ ▀▀▀ ▀▀▀ ░░▀░░ ▄▄▄█ 

█▀▀█ █▀▀ █▀▀ █▀▀ █▀▀ ▀▀█▀▀ █▀▀ █▀▄▀█ █▀▀ █▀▀▄ ▀▀█▀▀ 
█▄▄█ ▀▀█ ▀▀█ █▀▀ ▀▀█ ░░█░░ █▀▀ █░▀░█ █▀▀ █░░█ ░░█░░ 
▀░░▀ ▀▀▀ ▀▀▀ ▀▀▀ ▀▀▀ ░░▀░░ ▀▀▀ ▀░░░▀ ▀▀▀ ▀░░▀ ░░▀░░

-------------------------------------------------------------------"
#EMOJI
CHECK="\342\234\224"
X="\342\234\227"
FRECCIA="\342\254\207"


#CHECK IF FOLDERS EXIST
if [ -d "/home/kali/Desktop/files/FILES/xmlreports" ]; then
    echo "$CHECK Script trovato! $CHECK"
else
   cd /
   cd /usr/share/nmap/scripts/
   git clone https://github.com/manuel-miglietta/EasytechWebVulnAssessment.git
   echo " "
   echo "$CHECK Importazione dello script avvenuta con successo! $CHECK"
fi

echo '\e[38;5;82m'

#IP
echo "Perfavore inserisci l'ip (senza https:// , http:// e sottodomini) $FRECCIA"
echo "\e[0m"
read IP

echo '\e[38;5;82m'


#CHECK STATUS
ping -c 1 $IP > /dev/null 2> /dev/null
if [ $? -eq 0 ]; then
    status="\033[0;32m$CHECK Il servizio è raggiungibile! $CHECK"
    echo $ip $status
else
    status="\033[0;31m$X Il servizio non è raggiungibile! $X"
    echo $ip $status
    exit
fi

echo '\e[38;5;82m'

#SCRIPT
xmlreports="/home/kali/Desktop/files/FILES/xmlreports"
scriptpath="/home/kali/Desktop/files/FILES/"
cd $xmlreports
rm Report$IP.xml 
touch "Report$IP.xml"
nmap -sS -sV -O -P0 -oX "Report$IP.xml" $IP
cd $scriptpath
python3 script.py -f $xmlreports/Report$IP.xml -t txt 

#END
echo "\e[0m

"


