#!/bin/sh

#CHECK IF ROOT
ROOTUID="0"

if [ "$(id -u)" -ne "$ROOTUID" ] ; then
    echo "Hai bisogno di avere privilegi superiori per poter eseguire questo script (root)"
    sudo su
fi

#EMOJI
CHECK="\342\234\224"
X="\342\234\227"
FRECCIA="\342\254\207"

#CHECK IF FOLDERS EXIST
if [ -d "/home/kali/Desktop/EasytechVulnerabiltyAssessment_Files/util/" ]; then
    echo "$CHECK Script trovato! $CHECK"

fi
echo '\e[38;5;82m'

#PARTE GRAFICA E PERSONALIZZATA INIZIALE
clear
title="Easytech Vulnerability Assessment"
echo "\033]0;$title\a"
echo '\e[38;5;82m'"-------------------------------------------------------------------


█░░░█ █▀▀ █░░ █▀▀ █▀▀█ █▀▄▀█ █▀▀ 　 ▀▀█▀▀ █▀▀█ 　 █▀▀ █▀▀█ █▀▀ █░░█ ▀▀█▀▀ █▀▀ █▀▀ █░░█ 
█▄█▄█ █▀▀ █░░ █░░ █░░█ █░▀░█ █▀▀ 　 ░░█░░ █░░█ 　 █▀▀ █▄▄█ ▀▀█ █▄▄█ ░░█░░ █▀▀ █░░ █▀▀█ 
░▀░▀░ ▀▀▀ ▀▀▀ ▀▀▀ ▀▀▀▀ ▀░░░▀ ▀▀▀ 　 ░░▀░░ ▀▀▀▀ 　 ▀▀▀ ▀░░▀ ▀▀▀ ▄▄▄█ ░░▀░░ ▀▀▀ ▀▀▀ ▀░░▀ 

▀█░█▀ █░░█ █░░ █▀▀▄ █▀▀ █▀▀█ █▀▀█ █▀▀▄ ░▀░ █░░ ░▀░ ▀▀█▀▀ █░░█ 
░█▄█░ █░░█ █░░ █░░█ █▀▀ █▄▄▀ █▄▄█ █▀▀▄ ▀█▀ █░░ ▀█▀ ░░█░░ █▄▄█ 
░░▀░░ ░▀▀▀ ▀▀▀ ▀░░▀ ▀▀▀ ▀░▀▀ ▀░░▀ ▀▀▀░ ▀▀▀ ▀▀▀ ▀▀▀ ░░▀░░ ▄▄▄█ 

█▀▀█ █▀▀ █▀▀ █▀▀ █▀▀ █▀▀ █▀▄▀█ █▀▀ █▀▀▄ ▀▀█▀▀ 
█▄▄█ ▀▀█ ▀▀█ █▀▀ ▀▀█ ▀▀█ █░▀░█ █▀▀ █░░█ ░░█░░ 
▀░░▀ ▀▀▀ ▀▀▀ ▀▀▀ ▀▀▀ ▀▀▀ ▀░░░▀ ▀▀▀ ▀░░▀ ░░▀░░

-------------------------------------------------------------------"
echo "$CHECK Script trovato! $CHECK"

#IP

IP=$(zenity --entry --text "Perfavore inserisci l'ip (senza https:// , http:// e sottodomini) $FRECCIA" --title "IP")

echo '\e[38;5;82m'

#CHECK STATUS
ping -c 1 $IP > /dev/null 2> /dev/null
if [ $? -eq 0 ]; then
    status="\033[0;32m$CHECK Il servizio è raggiungibile! $CHECK"
    echo $status
else
    status="\033[0;31m$X Il servizio non è raggiungibile! $X"
    echo  $status
    exit
fi

echo '\e[38;5;82m'

#SCRIPT
scriptpath="/home/kali/Desktop/EasytechVulnerabiltyAssessment_Files/"
cd $scriptpath
rm "Report.xml"
nmap -sS -sV -P0 -O -Pn -oX "Report.xml" $IP
echo "\e[0m"
python3 script.py -f Report.xml 
